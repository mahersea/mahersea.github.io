<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metal Evolution</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse {
            0%, 100% { text-shadow: 0 0 20px rgba(255, 107, 53, 0.5); }
            50% { text-shadow: 0 0 30px rgba(255, 107, 53, 0.8), 0 0 60px rgba(255, 107, 53, 0.4); }
        }

        .title-glow {
            animation: pulse 3s ease-in-out infinite;
        }

        .connector-line {
            position: relative;
        }

        .connector-line::before {
            content: '';
            position: absolute;
            left: 50%;
            top: -20px;
            width: 2px;
            height: 20px;
            transform: translateX(-50%);
        }

        .node-proto { background: #4a0e0e; border-color: #ff6b35; }
        .node-foundational { background: #1a3a2e; border-color: #00ff88; }
        .node-desert { background: #3a2a1a; border-color: #f4a460; }
        .node-doom { background: #2d1b2e; border-color: #9d4edd; }
        .node-psychedelic { background: #1a2a3a; border-color: #00d4ff; }

        .connector-proto::before { background: #ff6b35; }
        .connector-foundational::before { background: #00ff88; }
        .connector-desert::before { background: #f4a460; }
        .connector-doom::before { background: #9d4edd; }
        .connector-psychedelic::before { background: #00d4ff; }

        .node-card {
            transition: all 0.3s ease;
        }

        .node-card:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px currentColor;
        }

        .hub-node {
            border-width: 4px;
            font-weight: bold;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0a0f 50%, #0f0a1a 100%);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-5 overflow-x-auto">
    <h1 class="text-4xl md:text-5xl text-[#ff6b35] uppercase tracking-[4px] my-8 text-center title-glow">
        ðŸŽ¸ Stoner/Doom Metal Evolution ðŸŽ¸
    </h1>

    <div class="w-full max-w-[2000px] bg-[rgba(20,10,25,0.8)] border-2 border-[#ff6b35] rounded-lg p-10 shadow-[0_0_40px_rgba(255,107,53,0.3),inset_0_0_60px_rgba(0,0,0,0.5)]">
        <div id="chart" class="flex flex-col items-center gap-8"></div>

        <div class="mt-8 p-5 bg-[rgba(0,0,0,0.5)] rounded-lg border border-gray-600">
            <h3 class="text-[#ff6b35] text-xl uppercase tracking-[2px] mb-4">Genre Guide</h3>
            <div id="legend" class="flex flex-wrap gap-4"></div>
        </div>
    </div>

    <script>
        // Embedded taxonomy data
        const taxonomyData = {
            "title": "ðŸŽ¸ Stoner/Doom Metal Evolution ðŸŽ¸",
            "root": {
                "name": "âš¡ Proto-Heavy Roots",
                "subtitle": "1968â€“1985",
                "style": "proto",
                "children": [
                    {
                        "name": "Black Sabbath",
                        "style": "foundational",
                        "children": [
                            {
                                "name": "Sleep",
                                "style": "foundational",
                                "children": [
                                    {
                                        "name": "Stoner Doom Axis",
                                        "style": "doom",
                                        "isHub": true,
                                        "children": [
                                            {"name": "Electric Wizard", "style": "doom"},
                                            {"name": "Acid King", "style": "doom"},
                                            {"name": "Bongzilla", "style": "doom"},
                                            {"name": "High on Fire", "style": "doom"},
                                            {"name": "Weedeater", "style": "doom"},
                                            {"name": "Dopelord", "style": "doom"},
                                            {"name": "Dove", "style": "doom"},
                                            {"name": "Cathedral", "style": "doom"}
                                        ]
                                    }
                                ]
                            },
                            {
                                "name": "Kyuss",
                                "style": "foundational",
                                "children": [
                                    {
                                        "name": "Desert Scene",
                                        "style": "desert",
                                        "isHub": true,
                                        "children": [
                                            {"name": "Fu Manchu", "style": "desert"},
                                            {"name": "Yawning Man", "style": "desert"},
                                            {"name": "Brant Bjork", "style": "desert"},
                                            {"name": "Nebula", "style": "desert"},
                                            {"name": "Unida", "style": "desert"},
                                            {"name": "Fatso Jetson", "style": "desert"},
                                            {"name": "Dozer", "style": "desert"},
                                            {"name": "Truckfighters", "style": "desert"}
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Blue Cheer",
                        "style": "foundational"
                    },
                    {
                        "name": "Hawkwind",
                        "style": "foundational",
                        "children": [
                            {
                                "name": "Colour Haze",
                                "style": "psychedelic",
                                "children": [
                                    {
                                        "name": "Earthless",
                                        "style": "psychedelic",
                                        "children": [
                                            {
                                                "name": "Elder",
                                                "style": "psychedelic",
                                                "children": [
                                                    {
                                                        "name": "King Buffalo",
                                                        "style": "psychedelic",
                                                        "children": [
                                                            {
                                                                "name": "Green Lung",
                                                                "style": "psychedelic",
                                                                "children": [
                                                                    {
                                                                        "name": "Slift",
                                                                        "style": "psychedelic",
                                                                        "children": [
                                                                            {"name": "Monolord", "style": "psychedelic"}
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {"name": "My Sleeping Karma", "style": "psychedelic"},
                                    {"name": "Comets on Fire", "style": "psychedelic"},
                                    {"name": "Dead Meadow", "style": "psychedelic"}
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Saint Vitus",
                        "style": "foundational",
                        "children": [
                            {
                                "name": "Sleep",
                                "style": "foundational",
                                "reference": true
                            },
                            {
                                "name": "Melvins",
                                "style": "doom",
                                "children": [
                                    {
                                        "name": "Eyehategod",
                                        "style": "doom",
                                        "children": [
                                            {
                                                "name": "Down",
                                                "style": "doom",
                                                "children": [
                                                    {
                                                        "name": "Corrosion of Conformity",
                                                        "style": "doom",
                                                        "children": [
                                                            {"name": "Clutch", "style": "doom"}
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Pentagram",
                        "style": "foundational"
                    }
                ]
            },
            "legend": [
                {
                    "name": "Proto-Heavy Roots",
                    "style": "proto",
                    "color": "#4a0e0e",
                    "border": "#ff6b35"
                },
                {
                    "name": "Foundational Bands",
                    "style": "foundational",
                    "color": "#1a3a2e",
                    "border": "#00ff88"
                },
                {
                    "name": "Desert / Fuzz",
                    "style": "desert",
                    "color": "#3a2a1a",
                    "border": "#f4a460"
                },
                {
                    "name": "Stoner Doom / Sludge",
                    "style": "doom",
                    "color": "#2d1b2e",
                    "border": "#9d4edd"
                },
                {
                    "name": "Psychedelic / Space",
                    "style": "psychedelic",
                    "color": "#1a2a3a",
                    "border": "#00d4ff"
                }
            ]
        };

        // Render immediately
        renderChart(taxonomyData);
        renderLegend(taxonomyData.legend);

        function renderChart(data) {
            const chart = document.getElementById('chart');
            chart.innerHTML = renderNode(data.root, 0);
        }

        function renderNode(node, depth, parentStyle = '') {
            if (!node) return '';

            const isReference = node.reference;
            const nodeStyle = node.style || parentStyle;
            const isHub = node.isHub;

            let html = '<div class="flex flex-col items-center gap-6">';

            // Render current node
            html += `
                <div class="connector-line connector-${nodeStyle}">
                    <div class="node-card node-${nodeStyle} border-4 rounded-lg px-6 py-3 text-white text-center min-w-[180px] ${isHub ? 'hub-node' : ''} ${isReference ? 'opacity-50 border-dashed' : ''}">
                        <div class="font-bold text-lg">${node.name}</div>
                        ${node.subtitle ? `<div class="text-sm opacity-80 mt-1">${node.subtitle}</div>` : ''}
                        ${isHub ? '<div class="text-xs mt-1 opacity-70">âš¡ HUB</div>' : ''}
                    </div>
                </div>
            `;

            // Render children
            if (node.children && node.children.length > 0 && !isReference) {
                if (node.children.length === 1) {
                    // Single child - vertical layout
                    html += renderNode(node.children[0], depth + 1, nodeStyle);
                } else {
                    // Multiple children - horizontal layout
                    html += '<div class="flex flex-wrap justify-center gap-8 max-w-full">';
                    node.children.forEach(child => {
                        html += `<div class="flex flex-col items-center">${renderNode(child, depth + 1, nodeStyle)}</div>`;
                    });
                    html += '</div>';
                }
            }

            html += '</div>';
            return html;
        }

        function renderLegend(legend) {
            const legendEl = document.getElementById('legend');
            legend.forEach(item => {
                const div = document.createElement('div');
                div.className = 'flex items-center gap-2';
                div.innerHTML = `
                    <div class="w-5 h-5 rounded border" style="background: ${item.color}; border-color: ${item.border};"></div>
                    <span class="text-gray-300">${item.name}</span>
                `;
                legendEl.appendChild(div);
            });
        }
    </script>
</body>
</html>
