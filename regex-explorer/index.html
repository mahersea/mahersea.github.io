<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Regex Explorer</title>
  <style>
    /* Light mode theme variables */
    :root {
      --primary1: #1E88E5;
      --primary2: #42A5F5;
      --primary3: #90CAF9;
      --primary4: #64B5F6;
      --primary5: #BBDEFB;
      --accent: #F06292;
      --bg-color: #f5f5f5;
      --text-color: #212121;
      --link: rgb(43, 136, 43);
    }
    /* Dark mode: alternative palette */
    body.dark-mode {
      --primary1: #90CAF9;
      --primary2: #64B5F6;
      --primary3: #42A5F5;
      --primary4: #1E88E5;
      --primary5: #0D47A1;
      --accent: #F48FB1;
      --bg-color: #303030;
      --text-color: #ffffff;
      --link: rgb(0, 172, 0);
    }
    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      font-size: 18px;
    }
    h1 {
      margin-bottom: 20px;
    }
    /* Standard buttons and select */
    button, select {
      font-size: 1rem;
      padding: 10px 20px;
      cursor: pointer;
      margin: 0 10px 20px 0;
      border: none;
      color: var(--text-color);
      background: linear-gradient(145deg, var(--primary1), var(--primary2));
      box-shadow: 3px 3px 6px rgba(0,0,0,0.2);
      border-radius: 5px;
    }
    select {
      background: linear-gradient(145deg, #888, #ccc);
    }
    button:hover, select:hover {
      opacity: 0.9;
    }
    /* Dark/Light Mode Toggle Container (top right) */
    #themeToggleContainer {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      align-items: center;
      z-index: 10;
    }
    /* Toggle switch styles */
    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
      margin-right: 10px;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, #0A237A, #283593);
      transition: 0.4s;
      border-radius: 34px;
      box-shadow: 3px 3px 6px rgba(0,0,0,0.2);
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: var(--bg-color);
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background: linear-gradient(90deg, #0A237A, #5C6BC0);
    }
    input:checked + .slider:before {
      transform: translateX(26px);
    }
    /* Control panel */
    #controlPanel {
      margin-bottom: 20px;
    }
    #controlPanel label {
      margin-right: 10px;
    }
    /* Layout for the top panes (regex preview and explanation) */
    #topContent {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }
    #regexPreview, #regexExplanation {
      flex: 1;
      padding: 10px;
      border: 1px solid var(--primary2);
      box-shadow: 3px 3px 10px rgba(0,0,0,0.3);
      max-height: 400px;
      overflow: auto;
    }
    #regexPreview {
      background: #000;
      color: #00FF00;
      white-space: pre-wrap;
      font-family: "Courier New", Courier, monospace;
      font-size: 0.95rem;
    }
    #regexExplanation {
      background: var(--primary5);
    }
    /* Layout for the bottom analysis pane */
    #analysisPane {
      padding: 10px;
      border: 1px solid var(--primary2);
      box-shadow: 3px 3px 10px rgba(0,0,0,0.3);
    }
    #inputContent {
      width: 100%;
      height: 150px;
      padding: 10px;
      font-size: 1rem;
      margin-bottom: 10px;
    }
    #regexResults {
      background: var(--primary5);
      padding: 10px;
      min-height: 50px;
    }
  </style>
</head>
<body class="light-mode">
  <!-- Dark/Light mode toggle -->
  <div id="themeToggleContainer">
    <label class="switch">
      <input type="checkbox" id="themeToggleSwitch">
      <span class="slider"></span>
    </label>
  </div>
  <h1>Regex Explorer</h1>
  <div id="controlPanel">
    <label for="regexSelect">Select a Regex Example:</label>
    <select id="regexSelect">
      <option value="email" selected>Email Address</option>
      <option value="url">URL</option>
      <option value="digits">Digits</option>
      <option value="word">Word Boundaries</option>
      <option value="hex">Hex Colors</option>
      <option value="date">Dates (YYYY-MM-DD)</option>
      <option value="phone">Phone Numbers</option>
      <option value="ip">IP Addresses</option>
      <option value="html">HTML Tags</option>
    </select>
  </div>
  <div id="topContent">
    <div id="regexPreview">
      <pre id="regexCode"></pre>
    </div>
    <div id="regexExplanation"></div>
  </div>
  <div id="analysisPane">
    <textarea id="inputContent" placeholder="Paste text here for regex analysis..."></textarea>
    <div id="regexResults"></div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const regexCode = document.getElementById('regexCode');
      const regexExplanation = document.getElementById('regexExplanation');
      const regexSelect = document.getElementById('regexSelect');
      const themeToggleSwitch = document.getElementById('themeToggleSwitch');
      const inputContent = document.getElementById('inputContent');
      const regexResults = document.getElementById('regexResults');
      
      let selectedRegex = '';

      // Define regex examples with additional filters
      const regexExamples = {
        email: {
          pattern: '\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}\\b',
          explanation: 'Matches email addresses. This regex is case-insensitive and looks for typical email patterns.'
        },
        url: {
          pattern: '(https?:\\/\\/[^\\s]+)',
          explanation: 'Matches URLs starting with http or https. It captures the entire URL until a whitespace character.'
        },
        digits: {
          pattern: '\\d+',
          explanation: 'Matches one or more digits. Useful for finding numeric values in text.'
        },
        word: {
          pattern: '\\b\\w+\\b',
          explanation: 'Matches individual words using word boundaries.'
        },
        hex: {
          pattern: '\\b#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})\\b',
          explanation: 'Matches hexadecimal color codes (3 or 6 digits) with or without a leading "#".'
        },
        date: {
          pattern: '\\b\\d{4}-\\d{2}-\\d{2}\\b',
          explanation: 'Matches dates in the YYYY-MM-DD format.'
        },
        phone: {
          pattern: '\\b\\d{3}[-.]?\\d{3}[-.]?\\d{4}\\b',
          explanation: 'Matches US phone numbers, allowing for dashes or dots as separators.'
        },
        ip: {
          pattern: '\\b(?:\\d{1,3}\\.){3}\\d{1,3}\\b',
          explanation: 'Matches IPv4 addresses. Note: Does not validate ranges.'
        },
        html: {
          pattern: '<\\/?[\\w\\s="/.:\';#-]+>',
          explanation: 'Matches simple HTML tags.'
        }
      };

      // Default input text containing examples of various filter types.
      const defaultInput = `Here are some examples for testing:

Email Addresses:
- Contact us at support@example.com or sales@domain.org.

URLs:
- Visit https://www.example.com for more info.
- Check out http://domain.net/page.

Digits:
- Order number: 1234567890.
- The year is 2025.

Words:
- Quick brown fox jumps.

Hex Colors:
- Primary color: #1E88E5, secondary color: 42A5F5.
- Short form: #FFF.

Dates:
- Event date: 2025-04-01.
- Another date: 1999-12-31.

Phone Numbers:
- Call 123-456-7890 or 987.654.3210.

IP Addresses:
- Server IP: 192.168.1.1, Backup: 10.0.0.2.

HTML Tags:
- <div>Hello World</div>
- <p>This is a paragraph.</p>`;

      // Populate the textarea with default text.
      inputContent.value = defaultInput;

      // Update regex preview and explanation based on the selected option.
      function updateRegexDisplay() {
        const selectedKey = regexSelect.value;
        const regexData = regexExamples[selectedKey];
        selectedRegex = regexData.pattern;
        regexCode.textContent = selectedRegex;
        regexExplanation.innerHTML = regexData.explanation;
        runRegexAnalysis(); // Re-run analysis if there is any input text
      }

      // Run regex analysis on the input content.
      function runRegexAnalysis() {
        const inputText = inputContent.value;
        let regex;
        try {
          // Create regex with global and case-insensitive flags.
          regex = new RegExp(selectedRegex, 'gi');
        } catch (e) {
          regexResults.innerHTML = 'Invalid regular expression.';
          return;
        }
        const matches = inputText.match(regex);
    
        // if no matches, AND "HTML Tags" was selected, show this absurd image
        if (regexSelect.value === 'html') {
          console.log('No matches found for HTML tags, displaying absurd image.');
          regexResults.innerHTML = '<img src="parsing-html-using-regex.jpg" alt="We have problems that do not want to be solved. They will fight you." />';
        } else {
          regexResults.innerHTML = matches ? matches.join('<br>') : 'No matches found.';
        }
      }

      // Event listeners.
      regexSelect.addEventListener('change', updateRegexDisplay);
      inputContent.addEventListener('input', runRegexAnalysis);
      themeToggleSwitch.addEventListener('change', function() {
        document.body.classList.toggle('dark-mode');
      });

      // Initialize display with the default regex example.
      updateRegexDisplay();
    });
  </script>
</body>
</html>
